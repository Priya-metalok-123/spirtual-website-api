<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <link rel="icon" href="https://www.metalok.io/images/favicon.png" type="image/x-icon">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="./header.css">
  <link rel="stylesheet" href="./css/form.css">
  <title>RamMandir | Contact</title>
</head>
<body class="body">
  <section class="about_body">
    <a href="./index.html"><img class="logo" src="https://www.metalok.io/images/website-logo.png" alt="" /></a>
    <div class="open-overlay">
      <span class="burger-icon "><img src="./images/burger_2.png" alt="" /></span>
      <span class="close-icon slide_close"><img src="./images/about/close.svg" alt="" /></span>
    </div>
  </section>
  <section class="contact_section1">
    <div class="contact_section1_inner">
      <div class="container-fluid">
        <div class="row">
          <div class="col-md-12 col-lg-12 col-xl-6 col-12 col-sm-12">
            <div class="contact_left_img_div">
              <!-- <img src="./images/contact/contact_1.png" alt="" /> -->
            </div>
          </div>
          <div class="col-md-12 col-lg-12 col-xl-6 col-12 col-sm-12">
            <div class="container">
              <div class="row right_form">
                <form autocomplete="off" action=" " method="POST" id="contactForm">
                    <input type="hidden" name="access_key">
                    <div class="mb-4 input_bg">
                        <div class="input_inner_border">
                            <label for="email" class="form-label">Email Address</label>
                            <input type="email" name="email" class="form-control" id="email"
                                placeholder="Enter your email address"  required>
                        </div>
                    </div>
                    <div class="mb-4 input_bg">
                        <div class="input_inner_border">
                            <label for="phone" class="form-label">Mobile Number</label>
                            <input type="tel" name="phone" class="form-control" id="phone"
                                placeholder="Enter your mobile number"  pattern="[0-9]{10}" required>
                        </div>
                    </div>
                    <div class="mb-4 input_text">
                        <div class="input_inner_border">
                            <label for="message" class="form-label">Message</label>
                            <textarea class="form-control" id="message" rows="3"
                                placeholder="Enter your message"  name="message" required></textarea>
                        </div>
                    </div>
                    <div class="mb-4 btn_sub_bottom">
                        <button type="submit" class="btn input_submit mb-3"> <span>Submit</span></button>
                    </div>
                </form>
                <div class="success-message" id="successMessage">Success! Your message has been sent.</div>
                </div>
              
              </div>
            </div>
          </div>
        </div> 
        <div class="powered_div">
          <p>Powered by @Metalok</p>
        </div>
      </div>
    </div>

  </section>

  <script src='//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
  <script src='https://cdnjs.cloudflare.com/ajax/libs/velocity/1.2.3/velocity.min.js'></script>
  <script src='https://cdnjs.cloudflare.com/ajax/libs/velocity/1.2.3/velocity.ui.min.js'></script>
  <script src="./header.js"></script>

  <script>
    document.getElementById('contactForm').addEventListener('submit', function(event) {
      // Prevent form submission
      event.preventDefault();
  
      // Validation logic
      var email = document.getElementById('email').value;
      var phone = document.getElementById('phone').value;
      var text = document.getElementById('message').value;
      if (!isValidEmail(email)) {
        alert('Please enter a valid email address');
        return;
      }
      if (!isValidMobile(phone)) {
        alert('Please enter a valid 10-digit mobile number');
        return;
      }
      if (!isValidText(text)) {
        alert('Please enter only alphabets and numbers in the message');
        return;
      }
  
      // Log user data to console
      console.log("User Data:");
      console.log("Email:", email);
      console.log("mobile:", phone);
      console.log("Message:", text);
  
      // Prepare data for API request
      var formData = new FormData();
      formData.append('email', email);
      formData.append('mobile', phone);
      formData.append('message', text);
  
      // Send API request
      fetch('http://3.111.17.212:3001/api/v1/contactus/addcontacts', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({
            email: email,
            mobile: phone,
            message: text
          })
        })
        .then(response => {
          if (!response.ok) {
            throw new Error('Network response was not ok');
          }
          return response.json();
        })
        .then(data => {
          console.log(data); // Handle API response
          // Show success message
          document.getElementById('successMessage').style.display = 'block';
          document.getElementById('successMessage').innerHTML = "Your message has been successfully sent!";
          // Optionally, perform any additional actions upon successful response
          // alert('API request successful');
        })
        .catch(error => {
          console.error('There was a problem with the API request:', error);
          // Optionally, handle errors or show error messages
          alert('There was a problem with the API request');
        });
    });
  
    // Validation functions
    function isValidEmail(email) {
      var pattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      return pattern.test(email);
    }
  
    function isValidMobile(phone) {
      var pattern = /^\d{10}$/;
      return pattern.test(phone);
    }
  
    function isValidText(text) {
      var pattern = /^[a-zA-Z0-9\s]+$/;
      return pattern.test(text);
    }
</script>

  
</body>
</html>
